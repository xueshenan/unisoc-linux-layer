#@TYPE: Machine
#@NAME: uis8520-k515-haps-k515 machine
#@DESCRIPTION: UNISOC uis8520-k515-haps-k515 machine

require conf/machine/include/uis8520/uis8520.inc
require conf/machine/include/uis8520/trusty.inc
require conf/machine/include/uis8520/video.inc
require conf/machine/include/uis8520/camera.inc
#require conf/machine/include/uis8520/gpu.inc

# unisoc common configuration
require conf/machine/include/common/unisoc-common.inc

# support dual-sim
require conf/machine/include/common/dual-sim.inc

# rootfs use ext4 or ubifs ? use ext4
require conf/machine/include/common/ext4-def.inc


MACHINE_FEATURES = "rsyslogsetup modem"


### console configuration
# console config need same as kernel cmdline
CONSOLE_LINUX = "ttyS1"
CONSOLE = "${CONSOLE_LINUX}"
SERIAL_CONSOLES = "115200;ttyS1"


KERNEL_BOARD_BASE = "uis8520-k515-haps"
KERNEL_BOARD = "uis8520-k515-haps"
UNISOC_KERNEL_VERSION = "linux-unisoc-5.15"
KERNEL_DT_SUBDIR = "${@bb.utils.contains('DEFAULTTUNE','aarch64','sprd/','',d)}"


UBOOT_BOARD = "uis8520_k515_haps"

# current need define KERNEL_DEFCONFIG and DTB
KERNEL_DEFCONFIG = "uis8520_k515_haps_defconfig"
KERNEL_MACHINE_PATCH = "file://kernel-config/uis8520-k515-haps.cfg \
             file://kernel-config/kernel-module-sysdump.cfg \
             file://kernel-config/kernel-module-modem.cfg \
			 file://close-SND-SOC.cfg \
             file://add-dtbo-haps-and-zebu.patch \
            "


# for recovery kernel image
KERNEL_RECOVERY_DEFCONFIG = "recovery_uis8520_k515_haps_defconfig"
KERNEL_PATCH_FOR_RECOVERY = "file://kernel-config/recovery-uis8520-k515-haps.cfg \
            "



CHIPRAM_MACHINE_PATCH = ""

U_BOOT_MACHINE_PATCH = ""

# for dtbo make
BSP_BUILD_DT_OVERLAY = "y"
export BSP_BUILD_DT_OVERLAY

BSP_BUILD_ANDROID_OS = "y"
export BSP_BUILD_ANDROID_OS

BSP_BUILD_FAMILY = "uis8520haps"
export BSP_BUILD_FAMILY
# end for dtbo make

CHIPRAM_SUPPORT_BOTH_EMMC_UFS = "yes"

EXTRA_IMAGEDEPENDS += "u-boot15"
EXTRA_IMAGEDEPENDS += "chipram"

IMAGE_INSTALL_append += " libgcc-dev "
