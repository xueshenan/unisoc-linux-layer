#@TYPE: Machine
#@NAME: ums9620-2h10-k515-k515 machine
#@DESCRIPTION: UNISOC ums9620-2h10-k515-k515 machine

require conf/machine/include/ums9620/ums9620.inc
require conf/machine/include/ums9620/trusty.inc
require conf/machine/include/ums9620/video.inc
require conf/machine/include/ums9620/camera.inc
#require conf/machine/include/ums9620/gpu.inc

# unisoc common configuration
require conf/machine/include/common/unisoc-common.inc

# support dual-sim
require conf/machine/include/common/dual-sim.inc

# rootfs use ext4 or ubifs ? use ext4
require conf/machine/include/common/ext4-def.inc


MACHINE_FEATURES = "rsyslogsetup modem"


### console configuration
# console config need same as kernel cmdline
CONSOLE_LINUX = "ttyS1"
CONSOLE = "${CONSOLE_LINUX}"
SERIAL_CONSOLES = "115200;ttyS1"


KERNEL_BOARD_BASE = "ums9620-base"
KERNEL_BOARD = "ums9620-2h10"
UNISOC_KERNEL_VERSION = "linux-unisoc-5.15"
KERNEL_DT_SUBDIR = "${@bb.utils.contains('DEFAULTTUNE','aarch64','sprd/','',d)}"


UBOOT_BOARD = "ums9620_2h10"

# current need define KERNEL_DEFCONFIG and DTB
KERNEL_DEFCONFIG = "ums9620_k515_defconfig"
KERNEL_MACHINE_PATCH = "file://kernel-config/ums9620-2h10.cfg \
             file://kernel-config/kernel-module-sysdump.cfg \
             file://kernel-config/kernel-module-modem.cfg \
             file://close-SND-SOC.cfg \
            "


# for recovery kernel image
KERNEL_RECOVERY_DEFCONFIG = "recovery_ums9620_k515_defconfig"
KERNEL_PATCH_FOR_RECOVERY = "file://kernel-config/recovery-ums9620-2h10.cfg \
            "



CHIPRAM_MACHINE_PATCH = ""

U_BOOT_MACHINE_PATCH = ""

# for dtbo make
BSP_BUILD_DT_OVERLAY = "y"
export BSP_BUILD_DT_OVERLAY

BSP_BUILD_ANDROID_OS = "y"
export BSP_BUILD_ANDROID_OS

BSP_BUILD_FAMILY = "qogirn6pro"
export BSP_BUILD_FAMILY
# end for dtbo make

CHIPRAM_SUPPORT_BOTH_EMMC_UFS = "yes"

EXTRA_IMAGEDEPENDS += "u-boot15"
EXTRA_IMAGEDEPENDS += "chipram"

SUPPORT_VOICECALL = "true"

IMAGE_INSTALL_append += " libgcc-dev "
