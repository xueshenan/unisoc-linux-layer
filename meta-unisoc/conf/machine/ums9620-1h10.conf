#@TYPE: Machine
#@NAME: ums9620-1h10 machine
#@DESCRIPTION: UNISOC ums9620-1h10 machine

require conf/machine/include/ums9620/ums9620.inc
require conf/machine/include/ums9620/trusty.inc
require conf/machine/include/ums9620/video.inc
require conf/machine/include/ums9620/camera.inc
#require conf/machine/include/ums9620/gpu.inc

# wayland shoud be in distro featue???

# unisoc common configuration
require conf/machine/include/common/unisoc-common.inc

# support dual-sim
require conf/machine/include/common/dual-sim.inc

# rootfs use ext4 or ubifs ? use ext4
require conf/machine/include/common/ext4-def.inc

# FEATURE frist close
# MACHINE_FEATURES = "rsyslogsetup modem radio production usbcontrol perflink"
# MACHINE_FEATURES += "android-tools-adbd"
# MACHINE_FEATURES += "engpc terminal unirlog"
# MACHINE_FEATURES += "gnss-adapter"
# MACHINE_FEATURES += "npi-support"
# MACHINE_FEATURES += "libteec teerpc sprdstorage tsupplicant"
# MACHINE_FEATURES += "engmodeapp"
# MACHINE_FEATURES += "sleepwakeup"
MACHINE_FEATURES += "fsckmsdos"

SUPPORT_SSHD = "${@bb.utils.contains('USERDEBUG','userdebug','ssh-server-openssh','',d)}"
# For board plugins support
#BOARD_PLUGINS_SUPPORT = "test common wcn-recovery"
DAEMON_INITTAB = "k1:5:respawn:/usr/sbin/ofonod -nd -p uncdev,unisoc,unisocmodem,bluez5,hfp_ag_bluez5,hfp_bluez5,hfpmodem+"
#MACHINE_ADD_DISTRO_FEATURES = "pulseaudio"

KERNEL_BOARD = "ums9620-1h10"
KERNEL_DT_SUBDIR = "${@bb.utils.contains('DEFAULTTUNE','aarch64','sprd/','',d)}"

# bsp use same ums9620-2h10
# uboot now use ums9620_2h10
UBOOT_BOARD = "ums9620_1h10"
UBOOT_BOARD_pn-u-boot15 = "ums9620_2h10"


# MACHINE_FEATURES += "upower suspendblocker "
# current need define KERNEL_DEFCONFIG and DTB
KERNEL_DEFCONFIG = "sprd_ums9620_defconfig"
KERNEL_MACHINE_PATCH = "file://ums9620-1h10.cfg \
	               "

# for recovery kernel image
KERNEL_RECOVERY_DEFCONFIG = "recovery_ums9620_defconfig"
KERNEL_PATCH_FOR_RECOVERY = "file://recovery-ums9620-1h10.cfg \
                        "

CHIPRAM_MACHINE_PATCH = ""

U_BOOT_MACHINE_PATCH = ""


CHIPRAM_SUPPORT_BOTH_EMMC_UFS = "no"

EXTRA_IMAGEDEPENDS += "u-boot15"
EXTRA_IMAGEDEPENDS += "chipram"

SUPPORT_VOICECALL = "true"

# KERNEL_MODULE_AUTOLOAD += "cpufreq_userspace"
# KERNEL_MODULE_AUTOLOAD += "sprd_ddr_dvfs"
# KERNEL_MODULE_AUTOLOAD += "sprd_soc_thm sprd_cpu_cooling sprd_gpu_cooling"
# KERNEL_MODULE_AUTOLOAD += "sprd-cpufreq-v2 sprd-cpufreq-public"

# todo : could add to conf/machine/include/common/ext4-def.inc
# note : prodnv userdata and swupdate not
EXTRA_IMAGECMD_ext4_pn-unisoc-wayland-image = "-i 4096 -b 4096"
