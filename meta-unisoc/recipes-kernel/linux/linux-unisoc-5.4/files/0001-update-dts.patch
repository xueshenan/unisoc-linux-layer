From 1289aad59e3ed13dd61c3c074a71670e772754d1 Mon Sep 17 00:00:00 2001
From: fujia <fujia@bingtangtech.com>
Date: Tue, 1 Aug 2023 12:19:04 +0800
Subject: [PATCH] update dts

---
 .../dts/sprd/lcd/lcd_rm67295_mipi_hd.dtsi     | 446 ++++++++++++++++++
 arch/arm64/boot/dts/sprd/qogirn6pro.dtsi      |  16 +-
 .../boot/dts/sprd/tp/ums9620-2h10-tp.dtsi     |  31 ++
 arch/arm64/boot/dts/sprd/ums9620-mach.dtsi    |   2 +-
 5 files changed, 785 insertions(+), 102 deletions(-)
 create mode 100755 arch/arm64/boot/dts/sprd/lcd/lcd_rm67295_mipi_hd.dtsi
 create mode 100755 arch/arm64/boot/dts/sprd/tp/ums9620-2h10-tp.dtsi

diff --git a/arch/arm64/boot/dts/sprd/lcd/lcd_rm67295_mipi_hd.dtsi b/arch/arm64/boot/dts/sprd/lcd/lcd_rm67295_mipi_hd.dtsi
new file mode 100755
index 000000000..2629506a7
--- /dev/null
+++ b/arch/arm64/boot/dts/sprd/lcd/lcd_rm67295_mipi_hd.dtsi
@@ -0,0 +1,446 @@
+/*
+ * NT35695 Truly LCD config dtsi file for spreadtrum
+ *
+ * Copyright (C) 2018, Spreadtrum Communications Inc.
+ *
+ * SPDX-License-Identifier: (GPL-2.0+ OR MIT)
+ */
+
+/ { 
+	fragment {
+		target-path = "/";
+		__overlay__ {
+			lcds {
+				lcd_rm67295_edo_mipi_fhd: lcd_rm67295_edo_mipi_fhd {
+
+					sprd,dsi-work-mode = <1>; 
+					sprd,dsi-lane-number = <4>;
+					sprd,dsi-color-format = "rgb888";
+					sprd,phy-bit-clock = <500000>;  /* kbps */
+					sprd,phy-escape-clock = <20000>;/* kHz */
+
+					sprd,video-lp-cmd-enable = <1>;
+					sprd,width-mm = <68>;
+					sprd,height-mm = <121>;
+
+					sprd,esd-check-mode = <0>;
+					sprd,esd-check-enable = <0>;
+					sprd,esd-check-register = <0x0A>;
+					sprd,esd-check-value = <0x1C>;
+
+					sprd,reset-on-sequence = <1 5>, <0 5>, <1 20>;
+					sprd,reset-off-sequence = <0 5>;
+
+					sprd,use-dcs-write;
+
+					sprd,initial-command = [
+						23 00 00 02 FE 04
+						23 00 00 02 01 08
+						23 00 00 02 0e 10
+						23 00 00 02 0A E6 
+						23 00 00 02 0B 8C 
+						23 00 00 02 0D A0
+						23 00 00 02 0F 40
+						23 00 00 02 16 19
+						23 00 00 02 29 93
+						23 00 00 02 2A 93
+						23 00 00 02 2F 02
+						23 00 00 02 31 02
+						23 00 00 02 33 05
+						23 00 00 02 37 2F 
+						23 00 00 02 38 2F 
+						23 00 00 02 3A 1E 
+						23 00 00 02 3B 1E 
+						23 00 00 02 3D 1D 
+						23 00 00 02 3F 80
+						23 00 00 02 40 48
+						23 00 00 02 41 E0 
+						23 00 00 02 4F 2F 
+						23 00 00 02 50 1e
+						23 00 00 02 51 0A 
+						23 00 00 02 E2 00
+						23 00 00 02 FE 07
+						23 00 00 02 03 40
+						23 00 00 02 05 00
+						23 00 00 02 07 1E 
+						23 00 00 02 5B 85
+						23 00 00 02 FE 06
+						23 00 00 02 00 EC 
+						23 00 00 02 05 08
+						23 00 00 02 07 E2 
+						23 00 00 02 08 EC 
+						23 00 00 02 0D 02
+						23 00 00 02 0F E2 
+						23 00 00 02 32 EC 
+						23 00 00 02 37 05
+						23 00 00 02 39 A0 
+						23 00 00 02 3A EC 
+						23 00 00 02 41 04
+						23 00 00 02 43 A0 
+						23 00 00 02 44 EC 
+						23 00 00 02 49 08
+						23 00 00 02 4B E2 
+						23 00 00 02 4C EC 
+						23 00 00 02 51 02
+						23 00 00 02 53 E2 
+						23 00 00 02 75 EC 
+						23 00 00 02 7A 05
+						23 00 00 02 7C A0 
+						23 00 00 02 7D EC 
+						23 00 00 02 82 04
+						23 00 00 02 84 A0 
+						23 00 00 02 85 EC 
+						23 00 00 02 86 0F 
+						23 00 00 02 87 FF 
+						23 00 00 02 88 00
+						23 00 00 02 8A 02
+						23 00 00 02 8C A0 
+						23 00 00 02 8D EA 
+						23 00 00 02 8E 0F 
+						23 00 00 02 8F FF 
+						23 00 00 02 90 06
+						23 00 00 02 91 00
+						23 00 00 02 92 05
+						23 00 00 02 93 F0 
+						23 00 00 02 94 28
+						23 00 00 02 95 EC 
+						23 00 00 02 96 0F 
+						23 00 00 02 97 FF 
+						23 00 00 02 98 00
+						23 00 00 02 9A 02
+						23 00 00 02 9C A0 
+						23 00 00 02 AC 04
+						23 00 00 02 B1 12
+						23 00 00 02 B2 17
+						23 00 00 02 B3 17
+						23 00 00 02 B4 17
+						23 00 00 02 B5 17
+						23 00 00 02 B6 11
+						23 00 00 02 B7 08
+						23 00 00 02 B8 09
+						23 00 00 02 B9 06
+						23 00 00 02 BA 07
+						23 00 00 02 BB 17
+						23 00 00 02 BC 17
+						23 00 00 02 BD 17
+						23 00 00 02 BE 17
+						23 00 00 02 BF 17
+						23 00 00 02 C0 17
+						23 00 00 02 C1 17
+						23 00 00 02 C2 17
+						23 00 00 02 C3 17
+						23 00 00 02 C4 0F 
+						23 00 00 02 C5 0E 
+						23 00 00 02 C6 00
+						23 00 00 02 C7 01
+						23 00 00 02 C8 10
+						23 00 00 02 FE 0E 
+						23 00 00 02 12 37
+						23 00 00 02 FE 0A 
+						23 00 00 02 25 66
+						23 00 00 02 FE 0D 
+						23 00 00 02 72 09
+						23 00 00 02 FE 0D 
+						23 00 00 02 03 20
+						23 00 00 02 20 00
+						23 00 00 02 21 00
+						23 00 00 02 1D 89
+						23 00 00 02 FE 40
+						23 00 00 02 0E 10
+						23 00 00 02 FE 00
+						23 00 00 02 51 88
+						23 00 00 02 35 00
+						23 78 00 02 11 00
+						23 0a 00 02 29 00
+						];
+
+					sprd,sleep-in-command = [
+						13 0A 00 01 28
+						13 78 00 01 10
+						];
+					sprd,sleep-out-command = [
+						13 50 00 01 11
+						13 14 00 01 29
+						];
+
+					oled-backlight {
+						default-brightness-level = <33>;
+						sprd,max-level = <255>;
+
+						brightness-levels = [
+							23 00 00 02 51 00
+							23 00 00 02 51 02
+							23 00 00 02 51 02
+							23 00 00 02 51 02
+							23 00 00 02 51 03
+							23 00 00 02 51 03
+							23 00 00 02 51 04
+							23 00 00 02 51 05
+							23 00 00 02 51 07
+							23 00 00 02 51 09
+							23 00 00 02 51 0A
+							23 00 00 02 51 0B
+							23 00 00 02 51 0C
+							23 00 00 02 51 0D
+							23 00 00 02 51 0E
+							23 00 00 02 51 0F
+							23 00 00 02 51 10
+							23 00 00 02 51 11
+							23 00 00 02 51 12
+							23 00 00 02 51 13
+							23 00 00 02 51 14
+							23 00 00 02 51 15
+							23 00 00 02 51 16
+							23 00 00 02 51 17
+							23 00 00 02 51 18
+							23 00 00 02 51 19
+							23 00 00 02 51 1A
+							23 00 00 02 51 1B
+							23 00 00 02 51 1C
+							23 00 00 02 51 1D
+							23 00 00 02 51 1E
+							23 00 00 02 51 1F
+							23 00 00 02 51 20
+							23 00 00 02 51 21
+							23 00 00 02 51 22
+							23 00 00 02 51 23
+							23 00 00 02 51 24
+							23 00 00 02 51 25
+							23 00 00 02 51 26
+							23 00 00 02 51 27
+							23 00 00 02 51 28
+							23 00 00 02 51 29
+							23 00 00 02 51 2A
+							23 00 00 02 51 2B
+							23 00 00 02 51 2C
+							23 00 00 02 51 2D
+							23 00 00 02 51 2E
+							23 00 00 02 51 2F
+							23 00 00 02 51 30
+							23 00 00 02 51 31
+							23 00 00 02 51 32
+							23 00 00 02 51 33
+							23 00 00 02 51 34
+							23 00 00 02 51 35
+							23 00 00 02 51 36
+							23 00 00 02 51 37
+							23 00 00 02 51 38
+							23 00 00 02 51 39
+							23 00 00 02 51 3A
+							23 00 00 02 51 3B
+							23 00 00 02 51 3C
+							23 00 00 02 51 3D
+							23 00 00 02 51 3E
+							23 00 00 02 51 3F
+							23 00 00 02 51 40
+							23 00 00 02 51 41
+							23 00 00 02 51 42
+							23 00 00 02 51 43
+							23 00 00 02 51 44
+							23 00 00 02 51 45
+							23 00 00 02 51 46
+							23 00 00 02 51 47
+							23 00 00 02 51 48
+							23 00 00 02 51 49
+							23 00 00 02 51 4A
+							23 00 00 02 51 4B
+							23 00 00 02 51 4C
+							23 00 00 02 51 4D
+							23 00 00 02 51 4E
+							23 00 00 02 51 4F
+							23 00 00 02 51 50
+							23 00 00 02 51 51
+							23 00 00 02 51 52
+							23 00 00 02 51 53
+							23 00 00 02 51 54
+							23 00 00 02 51 55
+							23 00 00 02 51 56
+							23 00 00 02 51 57
+							23 00 00 02 51 58
+							23 00 00 02 51 59
+							23 00 00 02 51 5A
+							23 00 00 02 51 5B
+							23 00 00 02 51 5C
+							23 00 00 02 51 5D
+							23 00 00 02 51 5E
+							23 00 00 02 51 5F
+							23 00 00 02 51 60
+							23 00 00 02 51 61
+							23 00 00 02 51 62
+							23 00 00 02 51 63
+							23 00 00 02 51 64
+							23 00 00 02 51 65
+							23 00 00 02 51 66
+							23 00 00 02 51 67
+							23 00 00 02 51 68
+							23 00 00 02 51 69
+							23 00 00 02 51 6A
+							23 00 00 02 51 6B
+							23 00 00 02 51 6C
+							23 00 00 02 51 6D
+							23 00 00 02 51 6E
+							23 00 00 02 51 6F
+							23 00 00 02 51 70
+							23 00 00 02 51 71
+							23 00 00 02 51 72
+							23 00 00 02 51 73
+							23 00 00 02 51 74
+							23 00 00 02 51 75
+							23 00 00 02 51 76
+							23 00 00 02 51 77
+							23 00 00 02 51 78
+							23 00 00 02 51 79
+							23 00 00 02 51 7A
+							23 00 00 02 51 7B
+							23 00 00 02 51 7C
+							23 00 00 02 51 7D
+							23 00 00 02 51 7E
+							23 00 00 02 51 7F
+							23 00 00 02 51 80
+							23 00 00 02 51 81
+							23 00 00 02 51 82
+							23 00 00 02 51 83
+							23 00 00 02 51 84
+							23 00 00 02 51 85
+							23 00 00 02 51 86
+							23 00 00 02 51 87
+							23 00 00 02 51 88
+							23 00 00 02 51 89
+							23 00 00 02 51 8A
+							23 00 00 02 51 8B
+							23 00 00 02 51 8C
+							23 00 00 02 51 8D
+							23 00 00 02 51 8E
+							23 00 00 02 51 8F
+							23 00 00 02 51 90
+							23 00 00 02 51 91
+							23 00 00 02 51 92
+							23 00 00 02 51 93
+							23 00 00 02 51 94
+							23 00 00 02 51 95
+							23 00 00 02 51 96
+							23 00 00 02 51 97
+							23 00 00 02 51 98
+							23 00 00 02 51 99
+							23 00 00 02 51 9A
+							23 00 00 02 51 9B
+							23 00 00 02 51 9C
+							23 00 00 02 51 9D
+							23 00 00 02 51 9E
+							23 00 00 02 51 9F
+							23 00 00 02 51 A0
+							23 00 00 02 51 A1
+							23 00 00 02 51 A2
+							23 00 00 02 51 A3
+							23 00 00 02 51 A4
+							23 00 00 02 51 A5
+							23 00 00 02 51 A6
+							23 00 00 02 51 A7
+							23 00 00 02 51 A8
+							23 00 00 02 51 A9
+							23 00 00 02 51 AA
+							23 00 00 02 51 AB
+							23 00 00 02 51 AC
+							23 00 00 02 51 AD
+							23 00 00 02 51 AE
+							23 00 00 02 51 AF
+							23 00 00 02 51 B0
+							23 00 00 02 51 B1
+							23 00 00 02 51 B2
+							23 00 00 02 51 B3
+							23 00 00 02 51 B4
+							23 00 00 02 51 B5
+							23 00 00 02 51 B6
+							23 00 00 02 51 B7
+							23 00 00 02 51 B8
+							23 00 00 02 51 B9
+							23 00 00 02 51 BA
+							23 00 00 02 51 BB
+							23 00 00 02 51 BC
+							23 00 00 02 51 BD
+							23 00 00 02 51 BE
+							23 00 00 02 51 BF
+							23 00 00 02 51 C0
+							23 00 00 02 51 C1
+							23 00 00 02 51 C2
+							23 00 00 02 51 C3
+							23 00 00 02 51 C4
+							23 00 00 02 51 C5
+							23 00 00 02 51 C6
+							23 00 00 02 51 C7
+							23 00 00 02 51 C8
+							23 00 00 02 51 C9
+							23 00 00 02 51 CA
+							23 00 00 02 51 CB
+							23 00 00 02 51 CC
+							23 00 00 02 51 CD
+							23 00 00 02 51 CE
+							23 00 00 02 51 CF
+							23 00 00 02 51 D0
+							23 00 00 02 51 D1
+							23 00 00 02 51 D2
+							23 00 00 02 51 D3
+							23 00 00 02 51 D4
+							23 00 00 02 51 D5
+							23 00 00 02 51 D6
+							23 00 00 02 51 D7
+							23 00 00 02 51 D8
+							23 00 00 02 51 D9
+							23 00 00 02 51 DA
+							23 00 00 02 51 DB
+							23 00 00 02 51 DC
+							23 00 00 02 51 DD
+							23 00 00 02 51 DE
+							23 00 00 02 51 DF
+							23 00 00 02 51 E0
+							23 00 00 02 51 E1
+							23 00 00 02 51 E2
+							23 00 00 02 51 E3
+							23 00 00 02 51 E4
+							23 00 00 02 51 E5
+							23 00 00 02 51 E6
+							23 00 00 02 51 E7
+							23 00 00 02 51 E8
+							23 00 00 02 51 E9
+							23 00 00 02 51 EA
+							23 00 00 02 51 EB
+							23 00 00 02 51 EC
+							23 00 00 02 51 ED
+							23 00 00 02 51 EE
+							23 00 00 02 51 EF
+							23 00 00 02 51 F0
+							23 00 00 02 51 F1
+							23 00 00 02 51 F2
+							23 00 00 02 51 F3
+							23 00 00 02 51 F4
+							23 00 00 02 51 F5
+							23 00 00 02 51 F6
+							23 00 00 02 51 F7
+							23 00 00 02 51 F8
+							23 00 00 02 51 F9
+							23 00 00 02 51 FA
+							23 00 00 02 51 FB
+							23 00 00 02 51 FC
+							23 00 00 02 51 FD
+							23 00 00 02 51 FE
+							];
+						};
+					display-timings {
+						native-mode = <&rm67295_timing0>;
+						rm67295_timing0: timing0 {
+							clock-frequency = <64000000>;
+							hactive = <720>;
+							vactive = <1280>;
+							hback-porch = <36>;
+							hfront-porch = <31>;
+							vback-porch = <16>;
+							vfront-porch = <8>;
+							hsync-len = <4>;
+							vsync-len = <4>;
+						};
+					};
+				};
+			};
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/sprd/qogirn6pro.dtsi b/arch/arm64/boot/dts/sprd/qogirn6pro.dtsi
index 345359f1a..bb10490a1 100644
--- a/arch/arm64/boot/dts/sprd/qogirn6pro.dtsi
+++ b/arch/arm64/boot/dts/sprd/qogirn6pro.dtsi
@@ -576,6 +576,18 @@
 				status = "disabled";
 			};
 
+			sdio2: sdio@22230000 {
+				compatible = "sprd,sdhci-r11";
+				reg = <0x2230000 0x1000>;
+				interrupts = <GIC_SPI 201 IRQ_TYPE_LEVEL_HIGH>;
+				clock-names = "sdio", "enable";
+				clocks = <&aonapb_clk CLK_SDIO2_2X>,
+				       <&apahb_gate CLK_SDIO2_EB>;
+				assigned-clocks = <&aonapb_clk CLK_SDIO2_2X>;
+				assigned-clock-parents = <&g1_pll CLK_RPLL_390M>;
+				status = "disabled";
+			};
+
 			i2c0: i2c@2240000 {
 				compatible = "sprd,qogirn6pro-i2c", "sprd,sc9860-i2c";
 				reg = <0x2240000 0x100>;
@@ -1810,8 +1822,8 @@
 						"clk_ipa_apb_dptx_eb";
 				clocks = <&ipadispc_gate CLK_IPA_DPU1_EB>,
 					<&ipadispc_gate CLK_IPA_DPTX_EB>;
-				dp-gpios = <&ap_gpio 61 GPIO_ACTIVE_HIGH>,
-						<&ap_gpio 62 GPIO_ACTIVE_HIGH>;
+				// dp-gpios = <&ap_gpio 61 GPIO_ACTIVE_HIGH>,
+				// 		<&ap_gpio 62 GPIO_ACTIVE_HIGH>;
 				extcon = <&pmic_pd>;
 
 				#sound-dai-cells = <1>;
diff --git a/arch/arm64/boot/dts/sprd/tp/ums9620-2h10-tp.dtsi b/arch/arm64/boot/dts/sprd/tp/ums9620-2h10-tp.dtsi
new file mode 100755
index 000000000..faac679e5
--- /dev/null
+++ b/arch/arm64/boot/dts/sprd/tp/ums9620-2h10-tp.dtsi
@@ -0,0 +1,31 @@
+&i2c3 {
+	status = "okay";
+	clock-frequency = <400000>;
+	#address-cells = <1>;
+	#size-cells = <0>;
+
+	goodix_ts@14 {                                                                                     
+		compatible = "goodix,gt1x";
+		reg = <0x14>;
+		goodix,reset-gpio = <&ap_gpio 14 GPIO_ACTIVE_LOW>;
+		goodix,irq-gpio = <&ap_gpio 13 GPIO_ACTIVE_LOW>;
+		vdd28-supply = <&vdd28>;
+	};
+
+	zinitix@20 {
+			compatible = "zinitix,zt7554";
+			reg = <0x20>;
+			zinitix,name= "zt7554";
+			zinitix,irq-gpio = <&ap_gpio 13 GPIO_ACTIVE_LOW>;
+			zinitix,reset-gpio = <&ap_gpio 14 GPIO_ACTIVE_LOW>;
+			zt7548,x_resolution = <720>;
+			zt7548,y_resolution = <1280>;
+			vdd28-supply = <&vdd28>;
+
+			/*zinitix,max-touch-number=<3>;*/
+			/*zinitix,key-x-coord = <720>;*/
+			/*zinitix,key-y-coord =<1280>;*/
+			/*zinitix,key-number = <1>;*/
+
+	};
+};
\ No newline at end of file
diff --git a/arch/arm64/boot/dts/sprd/ums9620-mach.dtsi b/arch/arm64/boot/dts/sprd/ums9620-mach.dtsi
index cfb0f4eb7..64ed816e0 100644
--- a/arch/arm64/boot/dts/sprd/ums9620-mach.dtsi
+++ b/arch/arm64/boot/dts/sprd/ums9620-mach.dtsi
@@ -1064,7 +1064,7 @@
 	status = "okay";
 };
 
-&sdio1 {
+&sdio2 {
 	sprd,phy-delay-sd-uhs-sdr104 = <0x0 0x7f 0x7d 0x7d>;
 	sprd,phy-delay-sd-uhs-sdr50 = <0x0 0xbf 0xc1 0xc1>;
 	bus-width = <4>;
-- 
2.25.1

