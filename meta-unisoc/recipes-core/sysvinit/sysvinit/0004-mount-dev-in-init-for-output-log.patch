From 77e1f9407c3be7212a0b81238aa1f21d3214d3ea Mon Sep 17 00:00:00 2001
From: "sheng.shen" <sheng.shen@unisoc.com>
Date: Thu, 17 Nov 2022 20:28:46 +0800
Subject: [PATCH] mount /dev in init for output log

---
 src/init.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/init.c b/src/init.c
index 767d1ce..065a997 100644
--- a/src/init.c
+++ b/src/init.c
@@ -63,6 +63,7 @@ Version information is not placed in the top-level Makefile by default
 #include <sys/ttydefaults.h>
 #include <sys/syslog.h>
 #include <sys/time.h>
+#include <sys/mount.h>
 
 #ifdef WITH_SELINUX
 #  include <selinux/selinux.h>
@@ -3100,6 +3101,9 @@ int main(int argc, char **argv)
 		maxproclen += strlen(argv[f]) + 1;
 	}
 
+        if(mount("devtmpfs","/dev","devtmpfs",MS_SILENT, "mode=0755")==0){	
+        	initlog(L_VB, " mount dev success");
+	}	
 #ifdef WITH_SELINUX
 	if (getenv("SELINUX_INIT") == NULL) {
          if (is_selinux_enabled() != 1) {
-- 
2.17.1

